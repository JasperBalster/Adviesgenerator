<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TIGRA Advies Generator</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
  label { display: block; margin-top: 15px; }
  textarea, input, select { width: 100%; padding: 8px; margin-top: 5px; }
  button { margin-top: 20px; padding: 10px 15px; font-size: 16px; }
  #resultaat { margin-top: 20px; white-space: pre-wrap; background: #f0f0f0; padding: 15px; }
</style>
</head>
<body>

<h1>TIGRA Advies Generator</h1>

<form id="adviesForm">
  <label>Naam getest persoon
    <input type="text" id="naam" required />
  </label>

  <label>Type onderzoek
    <select id="onderzoek" required>
      <option value="PMO">PMO</option>
      <option value="Healthcheck">Healthcheck</option>
      <option value="Sportkeuring">Sportkeuring</option>
    </select>
  </label>

  <label>Naam bedrijf
    <input type="text" id="bedrijf" required />
  </label>

  <label>Werkvermogen
    <select id="werkvermogen" required>
      <option value="slecht">Slecht werkvermogen</option>
      <option value="matig">Matig werkvermogen</option>
      <option value="goed">Goed werkvermogen</option>
    </select>
  </label>

  <label>Feedback werkgerelateerd
    <textarea id="werkFeedback" rows="3"></textarea>
  </label>

  <label>Feedback leefstijl
    <textarea id="leefstijlFeedback" rows="3"></textarea>
  </label>

  <label>Feedback biometrie
    <textarea id="biometrieFeedback" rows="3"></textarea>
  </label>

  <label>Gezondheidsmetingen (bloeddruk, HRV, cholesterol, bloedsuiker)
    <textarea id="gezondheidsmetingen" rows="3"></textarea>
  </label>

  <label>Overige metingen (ogen, oren, longfunctie, fysieke metingen)
    <textarea id="overigeMetingen" rows="3"></textarea>
  </label>

  <label>Extra opmerkingen adviseur
    <textarea id="extraTekst" rows="3"></textarea>
  </label>

  <label>Contactgegevens adviseur
    <textarea id="contactgegevens" rows="2"></textarea>
  </label>

  <button type="submit">Genereer Advies</button>
</form>

<div id="resultaat" style="display:none;"></div>

<script>
  const form = document.getElementById('adviesForm');
  const resultaatDiv = document.getElementById('resultaat');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    resultaatDiv.style.display = 'block';
    resultaatDiv.textContent = "Advies wordt gegenereerd... even geduld.";

    // Verzamel input waarden
    const naam = document.getElementById('naam').value.trim();
    const onderzoek = document.getElementById('onderzoek').value;
    const bedrijf = document.getElementById('bedrijf').value.trim();
    const werkvermogen = document.getElementById('werkvermogen').value;
    const werkFeedback = document.getElementById('werkFeedback').value.trim();
    const leefstijlFeedback = document.getElementById('leefstijlFeedback').value.trim();
    const biometrieFeedback = document.getElementById('biometrieFeedback').value.trim();
    const gezondheidsmetingen = document.getElementById('gezondheidsmetingen').value.trim();
    const overigeMetingen = document.getElementById('overigeMetingen').value.trim();
    const extraTekst = document.getElementById('extraTekst').value.trim();
    const contactgegevens = document.getElementById('contactgegevens').value.trim();

    // Prompt opbouwen voor het model
    const prompt = `
Beste ${naam},

Bedankt voor de deelname aan de ${onderzoek} via ${bedrijf}. Je scoort een ${werkvermogen} werkvermogen, dat betekent ${
      werkvermogen === 'goed' ? 'dat je je werk goed kunt uitvoeren.' : 
      werkvermogen === 'matig' ? 'dat er enige beperkingen zijn die je hinderen in het uitvoeren van je werk.' : 
      'dat er aanzienlijke beperkingen zijn die je hinderen in het uitvoeren van je werk.'
    }

Werkgerelateerd:
${werkFeedback || 'Geen feedback opgegeven.'}

Leefstijl:
${leefstijlFeedback || 'Geen feedback opgegeven.'}

Biometrie:
${biometrieFeedback || 'Geen feedback opgegeven.'}

Gezondheidsmetingen:
${gezondheidsmetingen || 'Geen feedback opgegeven.'}

Overige metingen:
${overigeMetingen || 'Geen feedback opgegeven.'}

Extra opmerkingen adviseur:
${extraTekst || 'Geen opmerkingen toegevoegd.'}

Wij wijzen erop dat het ${onderzoek} een momentopname is. Bij klachten over uw gezondheid of inzetbaarheid dient u met uw huisarts of bedrijfsarts contact op te nemen. Mocht u over de uitslagen nog vragen hebben, dan kunt u met ondergetekende contact opnemen.

Met vriendelijke groet,
${contactgegevens || '-'}
`;

    try {
      const response = await fetch('https://hf.space/embed/JasperBalster/Adviesgenerator/api/predict/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ data: [prompt] })
      });

      if (!response.ok) {
        throw new Error(`API fout: ${response.status} ${response.statusText}`);
      }

      const data = await response.json();
      // data.response is een array met het gegenereerde antwoord
      resultaatDiv.textContent = data.data[0];
    } catch (error) {
      resultaatDiv.textContent = `Fout bij het ophalen van advies: ${error.message}`;
    }
  });
</script>

</body>
</html>

