<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>TIGRA Adviesgenerator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    label, select, textarea, input {
      display: block;
      margin-bottom: 10px;
      width: 100%;
      max-width: 600px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
    }
    textarea#adviceOutput {
      height: 300px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>TIGRA Adviesgenerator</h1>

  <label>Naam getest persoon:</label>
  <input id="naam" type="text">

  <label>Type onderzoek:</label>
  <select id="type">
    <option>PMO</option>
    <option>Healthcheck</option>
    <option>Sportkeuring</option>
  </select>

  <label>Naam bedrijf:</label>
  <input id="bedrijf" type="text">

  <label>Werkvermogen:</label>
  <select id="werkvermogen">
    <option>Slecht</option>
    <option>Matig</option>
    <option>Goed</option>
  </select>

  <label>Feedback werkgerelateerd:</label>
  <textarea id="werkgerelateerd"></textarea>

  <label>Feedback leefstijl:</label>
  <textarea id="leefstijl"></textarea>

  <label>Feedback biometrie:</label>
  <textarea id="biometrie"></textarea>

  <label>Gezondheidsmetingen (bloeddruk, HRV, cholesterol, bloedsuiker):</label>
  <textarea id="metingen"></textarea>

  <label>Overige metingen (ogen, oren, longfunctie, fysieke metingen):</label>
  <textarea id="overigemetingen"></textarea>

  <label>Persoonlijke toevoeging adviseur:</label>
  <textarea id="persoonlijk"></textarea>

  <label>Contactgegevens adviseur:</label>
  <textarea id="contact"></textarea>

  <button onclick="genereerAdvies()">Genereer Advies</button>

  <h2>Gegenereerd Advies:</h2>
  <textarea id="adviceOutput" readonly></textarea>

  <script>
    async function genereerAdvies() {
      const data = {
        naam: document.getElementById('naam').value,
        type: document.getElementById('type').value,
        bedrijf: document.getElementById('bedrijf').value,
        werkvermogen: document.getElementById('werkvermogen').value,
        werkgerelateerd: document.getElementById('werkgerelateerd').value,
        leefstijl: document.getElementById('leefstijl').value,
        biometrie: document.getElementById('biometrie').value,
        metingen: document.getElementById('metingen').value,
        overige: document.getElementById('overigemetingen').value,
        persoonlijk: document.getElementById('persoonlijk').value,
        contact: document.getElementById('contact').value
      };

      const prompt = `
Maak een advies voor de volgende persoon op basis van een ${data.type} van het bedrijf ${data.bedrijf}.

Beste ${data.naam},

Bedankt voor de deelname aan de ${data.type} via ${data.bedrijf}. Je scoort een ${data.werkvermogen.toLowerCase()} werkvermogen. Dat betekent: ${
        data.werkvermogen === "Goed"
          ? "je kunt je werk goed uitvoeren."
          : data.werkvermogen === "Matig"
          ? "dat er enkele aandachtspunten zijn voor je inzetbaarheid."
          : "dat er beperkingen zijn die je hinderen in het uitvoeren van je werk."
      }

Werkgerelateerd:
${data.werkgerelateerd}

Leefstijl:
${data.leefstijl}

Biometrie:
${data.biometrie}

Gezondheidsmetingen:
${data.metingen}

Overige metingen:
${data.overige}

Persoonlijke toelichting:
${data.persoonlijk}

Wij wijzen erop dat het ${data.type} een momentopname is. Bij klachten over uw gezondheid of inzetbaarheid dient u met uw huisarts of bedrijfsarts contact op te nemen. Mocht u over de uitslagen nog vragen hebben, dan kunt u met ondergetekende contact opnemen.

Met vriendelijke groet,

${data.contact}
`;

      const response = await fetch("https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.1", {
        method: "POST",
        headers: {
          "Authorization": "Bearer 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",
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          inputs: prompt
        })
      });

      if (!response.ok) {
        document.getElementById('adviceOutput').value = "Fout bij het ophalen van advies: " + response.status;
        return;
      }

      const result = await response.json();
      const outputText = result[0]?.generated_text || "Geen advies gegenereerd.";
      document.getElementById('adviceOutput').value = outputText.replace(prompt, '').trim();
    }
  </script>
</body>
</html>
